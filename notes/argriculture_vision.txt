1 数据光谱异质性差异大，同种地物分布差异很大, 以及多尺度


基本无法完全重建，会导致异常分布比真正的异常还高。但是我们不能放弃pixel-level，而是给pixel-level一个
更鲁棒的特征

2 AUC有没有更高效计算方法，gpu用不了，目前感觉2000以上就基本稳定了

目前的数据集u1s1，边界还可以用

OCSVM: 无法gpu加速，不适合大规模影像处理，且依赖核函数选择，不具备深度特征的优越性


分块的问题是模型的问题，更换模型后可以了，但是发现过拟合，即训练集会全在半径内，异常分数全是0，这个问题先放下

另一个问题是auc评价的问题，1 像素很多 2 标注不准，
解决措施是每幅影像取异常和正常都取平均，相当于只计算两个异常分数

最后的1x1卷积可以做可视化分析

如果直接优化bce会发现可视化效果好些，但是定量的不太行，且后期svdd_loss会爆炸增长，如果两者结合呢？

其实只用svdd_loss然后每张影像归一化会让一些没那么异常的元素变得异常分数很高，如果全局归一化，一方面是计算效率问题，
另一方面容易受到极值影响

合并bce+svddloss可以防止svdd过拟合，及bce优化时候svdd_loss爆炸

做到了直接优化异常图

多尺度成了！

虽然优化的时候anomaly_map应该都是1，但是由于噪声的存在，所以强行到[0,1]是合理的

发现svdd_loss先下降， 选取一个radius开始上升的时候停止，radius最小的比较靠谱，此时bce相当于约束它不能无限小

题目： 地球观测领域场景理解的异常分割模型

RIAD原论文使用的是MSGMS得到AD score，本次继续使用，实验发现会比重建损失 auc低

"""
训练比例是(0.7,)
测试比例是(0.3, 0.6)
"""

对比损失巧妙的一个点是，当距离特别大时，数很小，不占主导，只有后期的时候发挥作用

我们是选取与中心距离最远的点求半径

test时候尽量都20个epoch，500张影像可视化评估

对比损失可以帮助svdd防止坍塌，但问题是异常分数大面积很高，因此加入bce相当于增加置信度，这个可以通过实验验证

终止标准是选取半径最小的那个

测试了协方差和对比损失，发现还是熵优化好些，每次半径先下降后上升，下降到最低点一般都挺好

FPS的图可以画一个，挺酷炫，本身咱们的模型速度就快